# 💊 사용자 친화적 맞춤형 의약품 추천 시스템

## ✨ 프로젝트 소개

본 프로젝트는 'C응용프로젝트' 과목의 일환으로 진행된 '사용자 친화적 맞춤형 의약품 추천 시스템'입니다. 시중에 수많은 일반의약품 정보 속에서 사용자가 자신에게 맞는 약을 선택하는 데 어려움을 겪는다는 문제의식에서 출발했습니다. 이에 사용자의 건강 정보와 증상을 기반으로 적절한 의약품을 추천하고, 약물 오남용을 방지하는 시스템 개발을 목표로 했습니다.

### 🎯 주요 기능

* 사용자 맞춤형 의약품 추천: 사용자의 나이, 성별, 임신 여부, 음주 여부, 통증을 입력받아 적합한 일반의약품을 추천합니다.
* 약물 상호작용 경고: 추천 약물 간의 병용 금기 상호작용이 있을 경우 사용자에게 경고 메시지를 제공하여 부작용 위험을 방지합니다.
* 직관적인 인터페이스: 의료 지식이 없는 일반인도 쉽게 접근할 수 있도록 콘솔 기반의 사용자 친화적인 인터페이스를 제공합니다.
* 관리자 모드: 약물 정보를 추가, 삭제, 수정할 수 있는 관리자 기능을 제공하여 데이터의 최신성과 정확성을 유지할 수 있습니다.
* CSV 기반 데이터 관리: 약물 데이터는 `drugs.csv` 파일에 저장 및 관리됩니다.

---

## ⚙️ 시스템 설계 및 핵심 코드 분석

보고서 파일을 대체하여, 저희 시스템의 설계와 핵심 코드에 대해 더 상세히 설명하겠습니다.

### 1. 핵심 자료구조

시스템의 기반이 되는 세 가지 주요 `struct`(구조체)입니다.

* `Drug`: 개별 의약품의 모든 정보를 담는 구조체입니다. 약의 이름, 효능, 복용 가능 연령, 임산부 및 음주자 안전성 여부, 그리고 상호작용하는 다른 약물 목록을 포함합니다.
    ```c
    typedef struct {
        char name[50];
        char efficacy[100];
        int  minAge, maxAge;
        int  pregnancySafe;  // 1=안전, 0=비안전
        int  alcoholSafe;    // 1=안전, 0=비안전
        char interactions[100];
    } Drug;
    ```
* `HashNode`: 약물 간 상호작용 정보를 효율적으로 검색하기 위한 해시 테이블의 노드입니다. 특정 약물(`drugName`)과 상호작용하는 약물(`interaction`)을 한 쌍으로 저장합니다. 해시 충돌(hash collision)이 발생할 경우를 대비해, 다음 노드를 가리키는 `next` 포인터를 두어 연결 리스트(Linked List) 형태로 데이터를 관리합니다.
    ```c
    typedef struct HashNode {
        char        drugName[50];
        char        interaction[50];
        struct HashNode* next;
    } HashNode;
    ```
* `PainNode`: 사용자로부터 통증 입력을 받을 때 사용하는 임시 연결 리스트의 노드입니다.

### 2. 약물 상호작용 관리 (해시 테이블)

다양한 약물 간의 복잡한 상호작용을 O(1)에 가까운 시간 복잡도로 빠르게 확인하기 위해 해시 테이블을 도입했습니다.

* `hashFunction`: 문자열(약물 이름)을 입력받아 해시 테이블의 인덱스로 사용할 정수 값을 반환합니다. 저희는 간단하면서도 효율적인 다항 회전 해시(polynomial rolling hash) 방식을 사용했습니다.
    ```c
    unsigned int hashFunction(const char* str) {
        unsigned int hash = 5381;
        int c;
        while ((c = *str++)) {
            hash = ((hash << 5) + hash) + c; // hash * 33 + c
        }
        return hash % HASH_SIZE;
    }
    ```
* `addInteraction` & `hasInteraction`: `addInteraction` 함수는 두 약물 간의 상호작용 관계를 해시 테이블에 추가합니다. `hasInteraction` 함수는 이 테이블을 조회하여 두 약물이 상호작용 관계에 있는지 여부를 `true` 또는 `false`로 빠르게 반환합니다. 이 두 함수는 시스템의 안전성을 보장하는 핵심적인 역할을 합니다.

### 3. 추천 로직 (DFS & 백트래킹)

사용자가 호소하는 여러 통증에 대해, 상호작용 없이 안전하게 복용할 수 있는 최적의 약물 조합을 찾는 것이 이 프로젝트의 가장 큰 기술적 과제였습니다. 이를 해결하기 위해 깊이 우선 탐색(DFS)과 백트래킹 알고리즘을 결합했습니다.

* `dfsAssign` 함수: 이 재귀 함수가 추천 로직의 심장부입니다.
    1.  **재귀 호출**: 첫 번째 통증부터 시작하여, 해당 통증에 효과가 있는 약물 후보들을 찾습니다.
    2.  **조건 필터링**: 후보 약물이 사용자의 `나이`, `임신 여부`, `음주 여부` 등 개인 조건에 맞는지 확인합니다.
    3.  **상호작용 검사**: 해당 약물이 이전에 선택된 다른 약물들과 상호작용이 없는지 `hasInteraction` 함수로 검사합니다.
    4.  **백트래킹**: 만약 모든 조건을 만족하면 해당 약물을 선택하고, 다음 통증에 대해 `dfsAssign` 함수를 재귀적으로 호출합니다. 만약 다음 단계에서 적절한 약을 찾지 못하거나 막다른 길에 다다르면, 현재 선택을 포기하고 이전 단계로 돌아가(백트래킹) 다른 약물 후보를 선택해 탐색을 계속합니다.
    5.  **종료 조건**: 모든 통증에 대한 약물 배정이 성공적으로 끝나면, `true`를 반환하며 재귀를 종료하고 최종 결과를 출력합니다.

### 4. 데이터 영속성 (CSV 파일 처리)

* `loadDrugsFromCSV`: 프로그램 시작 시 `drugs.csv` 파일의 데이터를 읽어 `Drug` 구조체 배열에 저장합니다. `strtok` 함수를 사용하여 탭(`\t`)으로 구분된 각 필드를 파싱합니다.
* `saveDrugsToCSV`: 관리자 모드에서 약물 정보가 변경되었을 때, 메모리에 있는 `Drug` 배열의 최신 상태를 다시 `drugs.csv` 파일에 덮어쓰는 역할을 합니다. 이를 통해 데이터의 영속성을 유지합니다.

---

## 🚀 프로젝트 설치 및 실행 방법

본 프로젝트는 C언어로 개발되었으며, Windows 환경에서 `gcc` 컴파일러를 통해 빌드 및 실행할 수 있습니다.

### ⬇️ 요구 사항

* gcc 컴파일러 (C99 표준 지원)
* Windows 10 또는 11 운영체제

### ⚙️ 설치 및 실행 단계

1.  **소스 코드 다운로드**:
    `main.c` 파일과 데이터 파일 `csv.csv`를 같은 디렉터리에 위치시킵니다.

2.  **컴파일**:
    명령 프롬프트(CMD) 또는 터미널을 열고 소스 코드가 있는 디렉터리로 이동한 후, 다음 명령어를 사용하여 코드를 컴파일합니다.
    ```bash
    gcc -o medicine_recommender main.c -Wall
    ```

3.  **실행**:
    컴파일이 완료되면 다음 명령어로 프로그램을 실행합니다.
    ```bash
    ./medicine_recommender
    ```

---

## 🖥️ 프로젝트 사용 방법

### 👩‍⚕️ 사용자 모드 (1번 선택)

1.  **모드 선택**: 프로그램 시작 시 `1`을 입력하여 사용자 모드를 선택합니다.
2.  **사용자 정보 입력**: 화면의 지시에 따라 나이, 성별, 임신 여부, 음주 여부, 통증 개수를 차례로 입력합니다.
3.  **통증 선택**: 시스템이 제시하는 통증 목록에서 자신이 겪는 통증의 이름을 정확히 입력합니다.
4.  **추천 결과 확인**: 시스템이 입력된 정보와 통증을 기반으로 약물 추천 결과를 출력합니다.

### 👨‍💻 관리자 모드 (2번 선택)

1.  **모드 선택**: 프로그램 시작 시 `2`을 입력하여 관리자 모드를 선택합니다.
2.  **관리자 메뉴**: 메뉴 중 원하는 작업을 선택하여 약물 데이터를 관리할 수 있습니다.
    * 1. 약물 목록: 현재 등록된 모든 의약품의 상세 정보를 확인합니다.
    * 2. 약물 추가: 새로운 약물 정보를 데이터베이스에 추가합니다.
    * 3. 약물 삭제: 목록에서 약물 번호를 선택하여 삭제합니다.
    * 4. 약물 수정: 기존 약물 정보를 새로운 값으로 업데이트합니다.
    * 5. 저장 후 종료: 관리자 모드에서 변경한 모든 내용을 `csv.csv` 파일에 저장하고 종료합니다.

---

## 👥 팀원 및 역할

본 프로젝트는 선문대학교 컴퓨터공학부 'C응용프로젝트' 과목의 팀 프로젝트로 수행되었습니다.

| 이름 | 학번 | 주요 역할 및 소감 |
| :--- | :--- | :--- |
| 김영은 | 2024243072 | 팀장으로서 프로젝트 계획 수립 및 전체 진행 과정을 총괄했습니다. 팀원들과의 원활한 소통과 협력을 통해 프로젝트를 성공적으로 완수할 수 있었으며, 이를 통해 기술적 역량과 더불어 팀워크의 중요성을 배울 수 있었습니다. |
| 남기용 | 2024243004 | 프로젝트 초기 아이디어 제안 및 전체적인 구조 기획에 참여했습니다. 실생활의 문제를 기술적으로 해결하는 과정에 흥미를 느꼈고, 특히 데이터 구조를 설계하고 개발 방향을 설정하는 과정에서 논리적 사고 능력을 향상시킬 수 있었습니다. |
| 박찬규 | 2024243084 | 핵심 로직 개발, 특히 DFS 백트래킹 알고리즘과 CSV 파일 입출력 부분 구현을 담당했습니다. 복잡한 로직을 코드로 구현하며 겪었던 문제들을 팀원들과의 토론을 통해 해결해나가면서 큰 성취감을 느꼈고, 프로그래밍에 대한 자신감을 얻게 되었습니다. |
| 윤시우 | 2024243043 | 프로젝트에 필요한 자료 조사 및 팀원 간의 협업 조율을 담당했습니다. 원활한 프로젝트 진행을 위해 적극적으로 소통하고 의견을 조율하며 팀에 기여할 수 있었던 점이 보람 있었습니다. 공동의 목표를 위해 협력하는 과정의 가치를 배울 수 있었습니다. |
